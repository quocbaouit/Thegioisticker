;"use strict",thegioistickerApp.factory("authInterceptorService",["$q","$injector","$location","localStorageService",function(a,b,c,d){var e={},f=function(a){a.headers=a.headers||{};var b=d.get("authorizationData");return b&&(a.headers.Authorization="Bearer "+b.token),a},g=function(e){if(e.status===401){var f=b.get("authService"),g=d.get("authorizationData");if(g&&g.useRefreshTokens)return c.path("/refresh"),a.reject(e);f.logOut(),c.path("/login")}return a.reject(e)};return e.request=f,e.responseError=g,e}])
;"use strict",thegioistickerApp.factory("authService",["$http","$q","localStorageService","ngAuthSettings",function(a,b,c,d){var e=d.apiServiceBaseUri,f={},g={isAuth:!1,id:"",fullName:"",address:"",email:"",phoneNumber:"",userName:"",useRefreshTokens:!1,isAdmin:!1},h={provider:"",userName:"",externalAccessToken:""},i=function(b){return n(),a.post(e+"api/account/register",b).then(function(a){return a})},j=function(b){return a.post(e+"api/account/changePassword",b).then(function(a){return a})},k=function(b){return a.post(e+"api/account/resetPassword",b).then(function(a){return a})},l=function(b){return a.post(e+"api/account/requestPasswordReset",b).then(function(a){return a})},m=function(f){var h="grant_type=password&username="+f.userName+"&password="+f.password;f.useRefreshTokens&&(h=h+"&client_id="+d.clientId);var i=b.defer();return a.post(e+"token",h,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){var b=a.isAdmin;f.useRefreshTokens?c.set("authorizationData",{token:a.access_token,userName:f.userName,id:a.id,fullName:a.fullName,address:a.address,email:a.email,phoneNumber:a.phoneNumber,refreshToken:a.refresh_token,useRefreshTokens:!0,isAdmin:b}):c.set("authorizationData",{token:a.access_token,userName:f.userName,id:a.id,fullName:a.fullName,address:a.address,email:a.email,phoneNumber:a.phoneNumber,refreshToken:"",useRefreshTokens:!1,isAdmin:b}),g.isAuth=!0,g.isAdmin=b,g.fullName=a.fullName,g.id=a.id,g.address=a.address,g.email=a.email,g.phoneNumber=a.phoneNumber,g.userName=f.userName,g.useRefreshTokens=f.useRefreshTokens,i.resolve(a)}).error(function(a,b){n(),i.reject(a)}),i.promise},n=function(){c.remove("authorizationData"),g.isAuth=!1,g.userName="",g.fullName="",g.address="",g.email="",g.phoneNumber="",g.useRefreshTokens=!1,g.isAdmin=!1},o=function(){var a=c.get("authorizationData");a&&(g.isAuth=!0,g.fullName=a.fullName,g.id=a.id,g.address=a.address,g.email=a.email,g.phoneNumber=a.phoneNumber,g.userName=a.userName,g.useRefreshTokens=a.useRefreshTokens,g.isAdmin=a.isAdmin)},p=function(){var f=b.defer(),g=c.get("authorizationData");if(g&&g.useRefreshTokens){var h="grant_type=refresh_token&refresh_token="+g.refreshToken+"&client_id="+d.clientId;c.remove("authorizationData"),a.post(e+"token",h,{headers:{"Content-Type":"application/x-www-form-urlencoded"}}).success(function(a){c.set("authorizationData",{token:a.access_token,userName:a.userName,fullName:a.fullName,refreshToken:a.refresh_token,useRefreshTokens:!0}),f.resolve(a)}).error(function(a,b){n(),f.reject(a)})}return f.promise},q=function(d){var f=b.defer();return a.get(e+"api/account/ObtainLocalAccessToken",{params:{provider:d.provider,externalAccessToken:d.externalAccessToken}}).success(function(a){var b=a.isAdmin;c.set("authorizationData",{token:a.access_token,id:a.id,userName:a.userName,fullName:a.fullName,address:a.address,email:a.email,phoneNumber:a.phoneNumber,refreshToken:"",useRefreshTokens:!1,isAdmin:b}),g.isAuth=!0,g.id=a.id,g.fullName=a.fullName,g.userName=a.userName,g.address=a.address,g.email=a.email,g.phoneNumber=a.phoneNumber,g.useRefreshTokens=!1,g.isAdmin=b,f.resolve(a)}).error(function(a,b){n(),f.reject(a)}),f.promise},r=function(d){var f=b.defer();return a.post(e+"api/account/registerexternal",d).success(function(a){var b=a.isAdmin;c.set("authorizationData",{token:a.access_token,id:a.id,userName:a.userName,fullName:a.fullName,address:a.address,email:a.email,phoneNumber:a.phoneNumber,refreshToken:"",useRefreshTokens:!1,isAdmin:b}),g.isAuth=!0,g.id=a.id,g.userName=a.userName,g.fullName=a.fullName,g.address=a.address,g.email=a.email,g.phoneNumber=a.phoneNumber,g.useRefreshTokens=!1,g.isAdmin=b,f.resolve(a)}).error(function(a,b){n(),f.reject(a)}),f.promise};return f.saveRegistration=i,f.saveChangePassword=j,f.requestPasswordReset=l,f.resetPassword=k,f.login=m,f.logOut=n,f.fillAuthData=o,f.authentication=g,f.refreshToken=p,f.obtainAccessToken=q,f.externalAuthData=h,f.registerExternal=r,f}])
;"use strict",thegioistickerApp.factory("ordersService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(){return a.get(c+"api/order").then(function(a){return a})},f=function(b){return a.post(c+"api/order/CreateOrder",b).then(function(a){return a})};return d.getOrders=e,d.saveOrder=f,d}])
;"use strict",thegioistickerApp.factory("tokensManagerService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(){return a.get(c+"api/refreshtokens").then(function(a){return a})},f=function(b){return a.delete(c+"api/refreshtokens/?tokenid="+b).then(function(a){return a})};return d.deleteRefreshTokens=f,d.getRefreshTokens=e,d}])
;"use strict",thegioistickerApp.factory("productService",["$http","ngAuthSettings","$q",function(a,b,c){var d=b.apiServiceBaseUri,e={},f=function(b,c,e){return a.get(d+"api/products/GetProductsForSale?pageIndex="+b+"&pageSize="+c+"&categoryId="+e+"").then(function(a){return a})},g=function(){return a.get(d+"api/products/getProductCategory").then(function(a){return a})},h=function(b){return a.get(d+"api/products/GetProductById/"+b).then(function(a){return a})},i=function(b){return a.get(d+"api/products/getProductBySeoUrl/"+b).then(function(a){return a})},j=function(b){return a.get(d+"api/products/GetProductByCode/"+b).then(function(a){return a})},k=function(){return a.get(d+"api/products/getProductsRegular").then(function(a){return a})},l=function(){return a.get(d+"api/products/getProductsHightLight").then(function(a){return a})},m=function(b){return a.get(d+"api/products/getProductsByCategory/"+b).then(function(a){return a})},n=function(b){return a.get(d+"api/products/getSampleByProductById/"+b).then(function(a){return a})},o=function(b){return a.get(d+"api/products/getSampleByProductBySeoUrl/"+b).then(function(a){return a})},p=function(b){return a.get(d+"api/upload/getListFileName/"+b).then(function(a){return a})},q=function(b){var e={method:"POST",url:d+"api/upload/?identifier="+b.product.transactionId+"",data:b.formdata,headers:{"Content-Type":undefined}};return a(e).then(function(a){return typeof a.data=="string"?a.data:c.reject(a.data)},function(a){return c.reject(a.data)})};return e.getProducts=f,e.getProductCategory=g,e.getProductById=h,e.getListFileName=p,e.getProductsRegular=k,e.getProductsHightLight=l,e.getProductByCode=j,e.getProductsByCategory=m,e.uploadFiles=q,e.getSampleByProductById=n,e.getProductBySeoUrl=i,e.getSampleByProductBySeoUrl=o,e}])
;"use strict",thegioistickerApp.factory("blogService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(b,d){return a.get(c+"api/blog/getBlogs?pageIndex="+b+"&pageSize="+d+"").then(function(a){return a})},f=function(b){return a.get(c+"api/blog/GetBlogById/"+b).then(function(a){return a})},g=function(b){return a.get(c+"api/blog/GetBlogBySeoUrl/"+b).then(function(a){return a})},h=function(){return a.get(c+"api/blog/getBlogForHomePage").then(function(a){return a})};return d.getblogs=e,d.getBlogById=f,d.getBlogBySeoUrl=g,d.getBlogForHomePage=h,d}])
;"use strict",thegioistickerApp.factory("commonService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(b,d){return a.get(c+"api/commons/GetcommonsForSale?pageIndex="+b+"&pageSize="+d+"").then(function(a){return a})};return d.getcommons=e,d}])
;"use strict",thegioistickerApp.factory("customerService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(b){return a.get(c+"api/customer/getCustomerByUserId?userId="+b+"").then(function(a){return a})},f=function(b){return a.post(c+"api/customer/saveCustomer",b).then(function(a){return a})};return d.getCustomerByUserId=e,d.savecustomer=f,d}])
;"use strict",thegioistickerApp.factory("faqService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(b,d){return a.get(c+"api/faq/getFaqs").then(function(a){return a})};return d.getfaqs=e,d}])
;"use strict",thegioistickerApp.factory("invoiceService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(){return a.get(c+"api/decalPrice/getDecalPrices").then(function(a){return a})};return d.getInvoices=e,d}])
;"use strict",thegioistickerApp.factory("sampleService",["$http","ngAuthSettings","$q",function(a,b,c){var d=b.apiServiceBaseUri,e={},f=function(b,c,e){return a.get(d+"api/samples/getSamples?pageIndex="+b+"&pageSize="+c+"&category="+e+"").then(function(a){return a})},g=function(){return a.get(d+"api/samples/getAllSample").then(function(a){return a})},h=function(b){return a.get(d+"api/upload/getListFileName/"+b).then(function(a){return a})},i=function(b){return a.get(d+"api/samples/getSamplesByShape/"+b).then(function(a){return a})};return e.getAllSample=g,e.getSampleByShapeId=i,e.getListFileName=h,e.getSamples=f,e}])
;"use strict",thegioistickerApp.factory("companyService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(b,d){return a.get(c+"api/company/getBlogs?pageIndex="+b+"&pageSize="+d+"").then(function(a){return a})},f=function(b){return a.get(c+"api/company/GetBlogById/"+b).then(function(a){return a})},g=function(){return a.get(c+"api/contentPage/getAllContentPage").then(function(a){return a})};return d.getcompanys=e,d.getBlogById=f,d.getAllContentPages=g,d}])
;"use strict",thegioistickerApp.factory("settingService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(){return a.get(c+"api/setting/getSettings").then(function(a){return a})},f=function(b){return a.get(c+"api/setting/GetSettingById/"+b).then(function(a){return a})},g=function(){return a.get(c+"api/setting/getPagingsetting").then(function(a){return a})},h=function(b){return a.post(c+"api/setting/saveSetting",b).then(function(a){return a})},i=function(b){return a.post(c+"api/setting/deleteSetting",b).then(function(a){return a})};return d.getsettingById=f,d.getsettings=e,d.getPagingsettings=g,d.saveSetting=h,d.delete=i,d}])
;"use strict",thegioistickerApp.factory("couponService",["$http","ngAuthSettings",function(a,b){var c=b.apiServiceBaseUri,d={},e=function(){return a.get(c+"api/coupon").then(function(a){return a})},f=function(b){return a.get(c+"api/coupon/GetcouponById/"+b).then(function(a){return a})},g=function(){return a.get(c+"api/coupon/getPagingcoupon").then(function(a){return a})},h=function(b){return a.post(c+"api/coupon/savecoupon",b).then(function(a){return a})},i=function(b){return a.post(c+"api/coupon/deletecoupon",b).then(function(a){return a})},j=function(b){var d={name:b};return a.post(c+"api/coupon/checkCoupon",d).then(function(a){return a})};return d.getcouponById=f,d.getcoupons=e,d.getPagingcoupons=g,d.savecoupon=h,d.delete=i,d.applyCounpon=j,d}])
;"use strict",thegioistickerApp.factory("shapeService",["$http","ngAuthSettings","$q",function(a,b,c){var d=b.apiServiceBaseUri,e={},f=function(b,c,e){return a.get(d+"api/products/GetProductsForSale?pageIndex="+b+"&pageSize="+c+"&categoryId="+e+"").then(function(a){return a})},g=function(){return a.get(d+"api/shapes/getAllShape").then(function(a){return a})},h=function(){return a.get(d+"api/products/getProductCategory").then(function(a){return a})},i=function(b){return a.get(d+"api/products/GetProductById/"+b).then(function(a){return a})},j=function(b){return a.get(d+"api/products/GetProductByCode/"+b).then(function(a){return a})},k=function(){return a.get(d+"api/products/getProductsRegular").then(function(a){return a})},l=function(){return a.get(d+"api/products/getProductsHightLight").then(function(a){return a})},m=function(b){return a.get(d+"api/products/getProductsByCategory/"+b).then(function(a){return a})},n=function(b){var e={method:"POST",url:d+"api/upload/?identifier="+b.product.transactionId+"",data:b.formdata,headers:{"Content-Type":undefined}};return a(e).then(function(a){return typeof a.data=="string"?a.data:c.reject(a.data)},function(a){return c.reject(a.data)})};return e.getProducts=f,e.getShapes=g,e.getProductCategory=h,e.getProductById=i,e.getProductsRegular=k,e.getProductsHightLight=l,e.getProductByCode=j,e.getProductsByCategory=m,e.uploadFiles=n,e}])
;thegioistickerApp.controller("RootController",["$window","localStorageService","Notification","authService","$rootScope","$scope","$location","$timeout","invoiceService","sampleService","productService","settingService",function(a,b,c,d,e,f,g,h,i,j,k,l){function m(){l.getsettings().then(function(a){f.settings=a.data},function(a){})}function n(){k.getProductsRegular().then(function(a){f.printingCategory=a.data,f.options=a.data,f.shoppingCart.material.id==undefined&&(f.shoppingCart.material=f.options[0])},function(a){})}function o(){f.shapes=[{id:1,name:"Hình Tròn",code:"hinhtron",image:"/images/shapes/hinhtron.png"},{id:2,name:"Hình Oval",code:"hinhoval",image:"/images/shapes/hinhoval.png"},{id:3,name:"Hình Vuông",code:"hinhvuong",image:"/images/shapes/hinhvuong.png"},{id:4,name:"Hình Vuông Bo Góc",code:"hinhvuongbogoc",image:"/images/shapes/hinhvuongbogoc.png"},{id:5,name:"Hình Chữ Nhật",code:"hinhchunhat",image:"/images/shapes/hinhchunhat.png"},{id:6,name:"Hình Chữ Nhật Bo Góc",code:"hinhchunhatbogoc",image:"/images/shapes/hinhchunhatbogoc.png"},{id:7,name:"Hình Hoa",code:"hinhhoa",image:"/images/shapes/hinhhoa.png"},{id:8,name:"Hình Nơ",code:"hinhno",image:"/images/shapes/hinhno.png"},{id:9,name:"Hình Lục Giác",code:"hinhlucgiac",image:"/images/shapes/hinhlucgiac.png"},{id:10,name:"Hình Trái Tim",code:"hinhtraitim",image:"/images/shapes/hinhtraitim.png"},{id:11,name:"Hình Mẫu 1",code:"hinhmau1",image:"/images/shapes/hinhmau1.png"},{id:12,name:"Hình Mẫu 2",code:"hinhmau2",image:"/images/shapes/hinhmau2.png"},{id:13,name:"Hình Mẫu 3",code:"hinhmau3",image:"/images/shapes/hinhmau3.png"},{id:14,name:"Hình Mẫu 4",code:"hinhmau4",image:"/images/shapes/hinhmau4.png"}]}function p(){i.getInvoices().then(function(a){f.stickers=a.data,u()},function(a){})}function q(){j.getAllSample().then(function(a){f.samples=a.data},function(a){})}function v(a,b,c){return Math.ceil(parseFloat(a*b/6e4*c).toFixed(2))}function w(a){return f.samples.find(function(b){return b.id==a})}function x(){h(function(){$("#f1").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f1").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()}),$("#f2").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f2").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()}),$("#f3").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f3").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}},file:{validators:{callback:{message:"Vui lòng chọn file.",callback:function(a,b,c){return f.countFiles!=""?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()}),$("#f4").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f4").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()})})}f.isShowCart=!0;if(window.location.pathname=="/gio-hang"||window.location.pathname=="/hoan-tat-don-hang"||window.location.pathname=="/thanh-toan")f.isShowCart=!1;f.checkActive=function(a){var b=window.location.pathname;return b.toLowerCase()==a.toLowerCase()?!0:!1},f.numPerPage=8,f.noOfPages=1,f.currentPage=1,f.currentCategory=1,f.settings=[],f.cart=[],f.shapes=[],f.subTotal=0,f.isLoaded=!1,f.printingCategory=[],f.shoppingCart={material:{},width:"",height:"",quantity:"",machining:{},cut:{},cutType:"",file:""},m(),n();if(window.location.pathname=="/"||window.location.pathname=="/thu-vien-decal"||window.location.pathname=="/chi-tiet-san-pham")o(),p(),q();setTimeout(function(){hideLoader()},1e3);if(b.get("shoppingCart")!=null){f.cart=b.get("shoppingCart").products,f.dataCount=f.cart.length;var r=0;for(var s=0,t=f.cart.length;s<t;s++)r+=f.cart[s].subTotal;f.subTotal1=r}f.isCreateExtenal=!1,f.authentication=d.authentication,f.isHomePage=!1;if(window.location.pathname=="/"||window.location.pathname=="/home"||window.location.pathname=="/Home"||window.location.pathname=="/home/index"||window.location.pathname=="/Home/Index"||window.location.pathname=="/home/Index"||window.location.pathname=="/Home/index")f.isHomePage=!0;f.isActive=function(a){var b=window.location.pathname.indexOf(a)==0;return b},f.removeShoppingCart=function(a){var d=f.cart.indexOf(a);f.cart.splice(d,1);var e=f.cart,g=f.cart.length;$("[data-count]").attr("data-count",g),b.set("shoppingCart",{products:e}),c.primary("Đã xóa khỏi giỏ hàng thành công")};var u=function(){var a=0;for(var c=0,d=f.cart.length;c<d;c++)a+=f.cart[c].subTotal;f.subTotal=a;var e=f.cart,g=f.cart.length;$("[data-count]").attr("data-count",g),b.set("shoppingCart",{products:e})};f.$watch("cart",u,!0),f.logOut=function(){d.logOut(),c.primary("Bạn đã đăng xuất thành công"),g.path("/")},f.showRegisterForm=function(){$(".loginBox").fadeOut("fast",function(){$(".registerBox").fadeIn("fast"),$(".login-footer").fadeOut("fast",function(){$(".register-footer").fadeIn("fast")}),$(".modal-title").html("Đăng ký bằng")}),$(".error").removeClass("alert alert-danger").html("")},f.showforgotForm=function(){$(".loginBox").fadeOut("fast",function(){$(".forgotBox").fadeIn("fast"),$(".registerBox").fadeOut("fast"),$(".login-footer").fadeOut("fast",function(){$(".register-footer").fadeIn("fast")}),$(".modal-title").html("Quên mật khẩu")}),$(".error").removeClass("alert alert-danger").html("")},f.showLoginForm=function(){$("#loginModal .registerBox").fadeOut("fast",function(){$(".forgotBox").fadeOut("fast"),$(".loginBox").fadeIn("fast"),$(".register-footer").fadeOut("fast",function(){$(".login-footer").fadeIn("fast")}),$(".modal-title").html("Đăng nhập bằng")}),$(".error").removeClass("alert alert-danger").html("")},f.openLoginModal=function(){f.showLoginForm(),setTimeout(function(){$("#loginModal").modal("show")},230)},f.openRegisterModal=function(){f.showRegisterForm(),setTimeout(function(){$("#loginModal").modal("show")},230)},f.shakeModal=function(a){$("#loginModal .modal-dialog").addClass("shake"),$(".error").addClass("alert alert-danger").html(a),$('input[type="password"]').val(""),setTimeout(function(){$("#loginModal .modal-dialog").removeClass("shake")},1e3)},f.samples=[],f.sampleGalery=[],f.step=1,f.product={},f.stickers=[],f.price=0,f.subTotal=0,f.square=0,f.fileDescription="",f.invoicePrintPrice="",f.invoiceMachining="",f.invoiceCut="",f.selectedMaterial="",f.fileUrl=[],f.machinings=[{value:"canmangbong",label:"Cán màng bóng"},{value:"canmangmo",label:"Cán màng mờ"},{value:"khongcanmang",label:"Không cán màng"}],f.cuts=[{value:"bedemi",label:"Bế demi"},{value:"khongbe",label:"Không bế"}],f.fileType={name:"design"},f.shoppingCart.machining=f.machinings[0],f.shoppingCart.cut=f.cuts[0],f.settingModal={name:"setting",fields:[{key:"congty",value:"",text:"Tên Công Ty"},{key:"sodt",value:"",text:"Số Điện Thoại"},{key:"email",value:"",text:"Email"},{key:"diachi",value:"",text:"Địa Chỉ"},{key:"ghichu",value:"",text:"Ghi Chú"}]};var u=function(){f.invoicePrintPrice="",f.invoiceMachining="",f.invoiceCut="",f.subTotal="",f.price=f.subTotal/i;var a={},b=0,c=0,d=0,e=f.shoppingCart.material.price,g=isNaN(parseFloat(f.shoppingCart.width))?0:parseFloat(f.shoppingCart.width),h=isNaN(parseFloat(f.shoppingCart.height))?0:parseFloat(f.shoppingCart.height),i=isNaN(parseFloat(f.shoppingCart.quantity))?0:parseFloat(f.shoppingCart.quantity);if(g>0&&h>0&&i>0){var j=v(g,h,i);a=f.stickers.find(function(a){return a.quantity==j}),a==undefined?(b=1320,d=1800,c=330,e=f.shoppingCart.material.price):(b=a.printPrice,d=a.cutPrice,c=a.machiningPrice,e=f.shoppingCart.material.price),f.shoppingCart.machining.value=="khongcanmang"&&(c=0),f.shoppingCart.cut.value=="khongbe"&&(d=0),f.invoicePrintPrice=(b+e)*j,f.invoiceMachining=c*j,f.invoiceCut=d*j,f.subTotal=(b+e+c+d)*j,f.price=f.subTotal/i}};f.$watch("shoppingCart",u,!0),f.addToshoppingCartFromSample=function(a){if(f.cart.length>=10)return c.error("Không thể thêm dịch vụ.</br>Có quá nhiều dịch vụ trong đơn hàng này."),!1;var d=$("#f2").data("formValidation"),e=$("#f2-step2");d.validateContainer(e);var g=d.isValidContainer(e);if(g===!1||g===null)return!1;f.product.transactionId=guid(),f.product.id=f.shoppingCart.material.id,f.product.name=f.shoppingCart.material.name,f.product.quantity=f.shoppingCart.quantity,f.product.price=f.price,f.product.subTotal=f.subTotal,f.product.width=f.shoppingCart.width,f.product.height=f.shoppingCart.height,f.product.machining=f.shoppingCart.machining.label,f.product.cut=f.shoppingCart.cut.label,f.product.cutType=f.shoppingCart.cutType.label,f.product.fileType=consSampple,f.product.fileId=a,f.product.fileDescription="",f.product.settingModal=JSON.stringify(f.settingModal),f.product.image=w(a).image;var h=f.product;f.cart.push(h);var i=f.cart,j=f.cart.length;$("[data-count]").attr("data-count",j),b.set("shoppingCart",{products:i}),window.location.href="/gio-hang"},f.addToshoppingCartFromDesign=function(){if(f.cart.length>=10)return c.error("Không thể thêm dịch vụ.</br>Có quá nhiều dịch vụ trong đơn hàng này."),!1;var a=$("#f4").data("formValidation"),d=$("#f4-step2");a.validateContainer(d);var e=a.isValidContainer(d);if(e===!1||e===null)return!1;f.product.transactionId=guid(),f.product.id=f.shoppingCart.material.id,f.product.name=f.shoppingCart.material.name,f.product.quantity=f.shoppingCart.quantity,f.product.price=f.price,f.product.subTotal=f.subTotal,f.product.width=f.shoppingCart.width,f.product.height=f.shoppingCart.height,f.product.machining=f.shoppingCart.machining.label,f.product.cut=f.shoppingCart.cut.label,f.product.cutType=f.shoppingCart.cutType.label,f.product.fileDescription=f.fileDescription,f.product.fileType=consDesign,f.product.settingModal="",f.product.image="";var g=f.product;f.cart.push(g);var h={};h.transactionId=f.product.transactionId,h.id=19,h.name="Thiết Kế Theo Yêu Cầu",h.quantity=1,h.price=1e5,h.subTotal=1e5,h.width=0,h.height=0,h.machining="",h.cut="",h.cutType="",h.fileDescription="",h.fileType=2,h.settingModal="",f.cart.push(h);var i=f.cart,j=f.cart.length;$("[data-count]").attr("data-count",j),b.set("shoppingCart",{products:i}),window.location.href="/gio-hang"},f.addToshoppingCartFromUpload=function(){f.product.id=f.shoppingCart.material.id,f.product.name=f.shoppingCart.material.name,f.product.quantity=f.shoppingCart.quantity,f.product.price=f.price,f.product.subTotal=f.subTotal,f.product.width=f.shoppingCart.width,f.product.height=f.shoppingCart.height,f.product.machining=f.shoppingCart.machining.label,f.product.cut=f.shoppingCart.cut.label,f.product.cutType=f.shoppingCart.cutType.label,f.product.fileDescription=f.fileDescription,f.product.fileType=consUpload,f.product.fileId=0,f.product.settingModal="",f.product.image="";var a=f.product;f.cart.push(a);var c=f.cart,d=f.cart.length;$("[data-count]").attr("data-count",d),b.set("shoppingCart",{products:c}),window.location.href="/gio-hang"},f.shopNow=function(){var a=$("#f1").data("formValidation"),b=$("#f1-step1");a.validateContainer(b);var c=a.isValidContainer(b);if(c===!1||c===null)return!1;if(f.fileType.name=="upload"){$("#upload-pupup").modal("show");return}if(f.fileType.name=="sample"){$("#library-pupup").modal("show");return}if(f.fileType.name=="design"){$("#design-pupup").modal("show");return}},f.showLibrary=function(a){f.selectedSample=f.samples.find(function(b){return b.id==a}),f.step=1,$("#library-pupup").modal("hide"),h(function(){$("#shopping-pupup").modal("show")},500)},f.nextStep=function(){f.step=2},f.nextStepUpload=function(){var a=$("#f3").data("formValidation"),b=$("#f3-step1");a.validateContainer(b);var c=a.isValidContainer(b);if(c===!1||c===null)return!1;f.step=2},f.prevStep=function(){f.step=1},f.closeModal=function(){f.step=1},f.uploading=!1,f.countFiles="",f.data=[],f.formdata=new FormData,f.getFiles=function(a){var b=0;angular.forEach(a,function(a,d){b+=a.size;var e=b/Math.pow(1024,2);if(e>100)return c("file in quá lớn vui lòng chọn lại"),f.formdata=new FormData,f.data=[],f.countFiles="",f.$apply,!1;f.formdata.append(d,a),f.data.push({FileName:a.name,FileLength:a.size})}),f.countFiles=f.data.length==0?"":f.data.length+" files selected",f.$apply(),f.formdata.append("countFiles",f.countFiles)},f.uploadFiles=function(){if(f.cart.length>=10)return c.error("Không thể thêm dịch vụ.</br>Có quá nhiều dịch vụ trong đơn hàng này."),!1;var a=$("#f3").data("formValidation"),b=$("#f3-step2");a.validateContainer(b);var d=a.isValidContainer(b);if(d===!1||d===null)return!1;f.product.transactionId=guid(),f.uploading=!0,showLoader(),k.uploadFiles(f).then(function(a){f.uploading=!1,a===""?(c.primary("Tải file thành công."),f.formdata=new FormData,f.data=[],f.countFiles="",f.$apply):(c.error("Đã có lỗi xảy ra."),console.log(a)),f.addToshoppingCartFromUpload()},function(a){f.uploading=!1,c.error("Đã có lỗi xảy ra."),console.log(a)})},f.onFileChange=function(a){a.value==1&&$("#upload-pupup").modal("show"),a.value==2&&$("#library-pupup").modal("show"),a.value==3&&$("#design-pupup").modal("show")},x(),f.setPage=function(){j.getSamples(f.currentPage,f.numPerPage,f.currentCategory).then(function(a){f.noOfPages=a.data.pager.totalPages,f.totalProduct=a.data.pager.totalItems,f.sampleGalery=a.data.items,$("html, body").animate({scrollTop:0},"slow")},function(a){})},f.$watch("currentPage",f.setPage),f.searchByCategory=function(a){f.currentCategory=a,f.numPerPage=8,f.noOfPages=1,f.currentPage=1,f.setPage()}}])
;"use strict",thegioistickerApp.controller("homeController",["$scope","blogService","$timeout","productService","localStorageService","Notification","sampleService","$compile","invoiceService",function(a,b,c,d,e,f,g,h,i){function j(b){$(".detail-slider .slider-for").slick("destroy"),$(".detail-slider .slider-nav").slick("destroy");var c=angular.element(document.querySelector(".detail-slider"));c.empty();var d='<div class="slider slider-for">';angular.forEach(b,function(a,b){d=d+'<div class="img-outline ng-scope"><img ng-click="showLibrary('+a.id+')" style="cursor:pointer;max-height:395px;" class="img-responsive" src="'+a.image+'"></div>'}),d+="</div>";var e='<div class="slider slider-nav img-slider">';angular.forEach(b,function(a,b){e=e+'<div class="img-small ng-scope"><img  class="img-responsive bd-color-setting" src="'+a.image+'"></div>'}),e+="</div>";var f=d+e,g=angular.element(f);c.append(g),h(c)(a),$(".detail-slider .slider-for").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,autoplay:!0,fade:!0,asNavFor:".detail-slider .slider-nav"}),$(".detail-slider .slider-nav").slick({slidesToShow:5,slidesToScroll:1,autoplay:!0,asNavFor:".detail-slider .slider-for",dots:!1,centerMode:!0,focusOnSelect:!0})}a.activeHome=!0,a.products=[],a.regularProducts=[],a.product={},a.selectedSample={},d.getProductsRegular().then(function(b){a.regularProducts=b.data},function(a){}),b.getBlogForHomePage().then(function(b){a.blog1=b.data[0],a.blog2=b.data[1]},function(a){}),a.testimonials=[{id:1,name:"Trần Thùy Linh",job:"Account - HCMC",testimonial:"Công nghệ in rất tiên tiến, thiết kế đẹp, mình rất hài lòng. Cảm ơn công ty đã làm rất chuyên nghiệp và tận tâm như vậy.",image:"/images/customer1.jpg"},{id:2,name:"Đỗ Trung",job:"Marketing - HCMC",testimonial:"Mình thực sự rất hài lòng với dịch vụ của công ty Nhanh – đẹp – rẻ. Chúc công ty ngày càng phát triển.",image:"/images/customer2.jpg"},{id:3,name:"Thảo Trương",job:"Graphic Designer - HCMC",testimonial:"Tôi hoàn toàn tin tưởng và hài lòng với chất lượng sản phẩm.",image:"/images/customer4.jpg"},{id:4,name:"Anh Ngô Đại",job:"Giáo Viên",testimonial:"Dịch vụ của bạn rất tốt. Tôi rất hài lòng ",image:"/images/customer3.jpg"}],g.getSampleByShapeId(1).then(function(b){a.samples=b.data,j(b.data)},function(a){}),g.getAllSample().then(function(b){a.samples=b.data,a.products=a.samples},function(a){}),a.searchByCategory=function(b,c){b.preventDefault(),a.products=a.samples,a.products=a.products.filter(function(a){return a.shapeId==c}),j(a.products)},$("body").delegate(".categories li","click",function(a){a.preventDefault(),$(".categories li.active").removeClass("active"),$(this).addClass("active")}),a.viewDetail=function(a){window.location.href="/chi-tiet-san-pham/"+a+""},a.viewDetailBlog=function(a){window.location.href="/thong-tin-chi-tiet?Id="+a+""},a.newLetterText="",a.newLetter=function(){if(a.newLetterText=="")return f.error("Vui lòng nhập email."),!1;f.success("Đã Đăng ký thành công.")}}])
;"use strict",thegioistickerApp.controller("loginController",["$scope","$timeout","Notification","$location","authService","ngAuthSettings",function(a,b,c,d,e,f){a.loginData={userName:"",password:"",useRefreshTokens:!1},a.waringMessage="",a.message="",a.savedSuccessfully=!1,a.message="",a.registration={fullName:"",userName:"",email:"",password:"",confirmPassword:""},a.forgot={email:""},a.signUp=function(){if(a.registration.fullName==""){a.shakeModal("Vui lòng nhập họ và tên");return}if(a.registration.email==""){a.shakeModal("Vui lòng nhập email");return}if(a.registration.password==""){a.shakeModal("Vui lòng nhập mật khẩu");return}if(a.registration.password!=a.registration.confirmPassword){a.shakeModal("Password và confirm password không giống nhau");return}e.saveRegistration(a.registration).then(function(d){a.savedSuccessfully=!0,b(function(){c.success("Tạo tài khoản thành công"),a.loginData={userName:a.registration.userName,password:a.registration.password,useRefreshTokens:!1},a.login()},1e3)},function(b){var c=[];for(var d in b.data.modelState)for(var e=0;e<b.data.modelState[d].length;e++)c.push(b.data.modelState[d][e]);a.shakeModal("Đã có lỗi xảy ra:"+c.join(" "))})},a.login=function(){e.login(a.loginData).then(function(b){a.loginData.password="",a.loginData.userName="",$("#loginModal").modal("hide"),c.primary("Bạn đã đăng nhập thành công"),location.reload()},function(b){a.shakeModal("Vui lòng kiểm tra lại userName và password")})},a.forgotPass=function(){if(a.forgot.email==""){a.shakeModal("Vui lòng nhập email");return}e.requestPasswordReset(a.forgot).then(function(b){a.forgot.email=="",c.primary("Đã gởi reset link tới email của bạn."),$("#loginModal").modal("hide")},function(b){a.shakeModal("Vui lòng kiểm tra lại email")})},a.authExternalProvider=function(b){var c=location.protocol+"//"+location.host+"/authcomplete.html",d=f.apiServiceBaseUri+"api/Account/ExternalLogin?provider="+b+"&response_type=token&client_id="+f.clientId+"&redirect_uri="+c;window.$windowScope=a;var e=window.open(d,"Authenticate Account","location=0,status=0,width=600,height=750")},a.makeExtenalUserName=function(){var a="",b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var c=0;c<50;c++)a+=b.charAt(Math.floor(Math.random()*b.length));return a},a.registerExternal=function(){if(a.registerData.fullName==""){a.shakeModal("Tên hiển thị không được trống");return}a.registerData.userName=a.makeExtenalUserName(),e.registerExternal(a.registerData).then(function(b){a.isCreateExtenal=!1,$("#loginModal").modal("hide"),c.primary("Bạn đã đăng nhập thành công"),location.reload()},function(b){var c=[];for(var d in b.modelState)c.push(b.modelState[d]);a.message="Failed to register user due to:"+c.join(" ")})},a.authCompletedCB=function(b){a.$apply(function(){if(b.haslocalaccount=="False")e.logOut(),e.externalAuthData={provider:b.provider,userName:b.external_user_name,externalAccessToken:b.external_access_token},a.openRegisterModal(),a.shakeModal("Liên kết thành công."),a.isCreateExtenal=!0,a.registerData={fullName:e.externalAuthData.userName,userName:e.externalAuthData.userName,provider:e.externalAuthData.provider,externalAccessToken:e.externalAuthData.externalAccessToken};else{var d={provider:b.provider,externalAccessToken:b.external_access_token};e.obtainAccessToken(d).then(function(a){$("#loginModal").modal("hide"),location.reload(),c.primary("Bạn đã đăng nhập thành công")},function(b){a.message=b.error_description})}})}}])
;"use strict",thegioistickerApp.controller("indexController",["$scope","$location","authService",function(a,b,c){a.logOut=function(){c.logOut(),b.path("/home")},a.authentication=c.authentication}])
;"use strict",thegioistickerApp.controller("ordersController",["$scope","ordersService",function(a,b){a.orders=[],b.getOrders().then(function(b){a.orders=b.data,hideLoader()},function(a){})}])
;"use strict",thegioistickerApp.controller("refreshController",["$scope","$location","authService",function(a,b,c){a.authentication=c.authentication,a.tokenRefreshed=!1,a.tokenResponse=null,a.refreshToken=function(){c.refreshToken().then(function(b){a.tokenRefreshed=!0,a.tokenResponse=b},function(a){b.path("/login")})}}])
;"use strict",thegioistickerApp.controller("tokensManagerController",["$scope","tokensManagerService",function(a,b){a.refreshTokens=[],b.getRefreshTokens().then(function(b){a.refreshTokens=b.data},function(a){alert(a.data.message)}),a.deleteRefreshTokens=function(c,d){d=window.encodeURIComponent(d),b.deleteRefreshTokens(d).then(function(b){a.refreshTokens.splice(c,1)},function(a){alert(a.data.message)})}}])
;"use strict",thegioistickerApp.controller("productController",["$scope","$timeout","productService","localStorageService","Notification",function(a,b,c,d,e){a.products=[],a.numPerPage=12,a.noOfPages=1,a.currentPage=1,a.categoryId=0,a.myselect={},a.categories=[],c.getProductCategory().then(function(b){a.categories=b.data,a.myselect=a.categories[0]},function(a){}),$("body").delegate(".categories li","click",function(a){a.preventDefault(),$(".categories li.active").removeClass("active"),$(this).addClass("active")}),a.setPage=function(){c.getProducts(a.currentPage,a.numPerPage,a.categoryId).then(function(b){a.noOfPages=b.data.pager.totalPages,a.totalProduct=b.data.pager.totalItems,a.products=[],angular.forEach(b.data.items,function(b,c){var d={id:b.id,name:b.name,description:b.description,price:b.price,quantity:1,quantityForView:1,promotionPrice:b.promotionPrice,total:0,categoryId:1,category:"rau quả",image:b.image,largeImage:b.image};a.products.push(d)}),$("html, body").animate({scrollTop:0},"slow"),hideLoader()},function(a){})},a.$watch("currentPage",a.setPage),a.searchByCategory=function(b){a.categoryId=b,a.setPage()},a.recentProducts=[];if(d.get("recentProducts")!==null){var f=d.get("recentProducts").recentProducts;a.recentProducts=f}$("body").delegate(".add-to-cart","click",function(a){var b=$(".shopping-cart"),c=$(this).parent().parent(".item").find("img").eq(0);if(c){var d=c.clone().offset({top:c.offset().top,left:c.offset().left}).css({opacity:"0.7",position:"absolute",height:"150px",width:"150px","z-index":"100"}).appendTo($("body")).animate({top:b.offset().top+10,left:b.offset().left+10,width:75,height:75},1e3,"easeInOutExpo");setTimeout(function(){b.effect("shake",{times:2},200)},1500),d.animate({width:0,height:0},function(){$(this).detach()})}}),a.viewDetail=function(a){window.location.href="/chi-tiet-san-pham/"+a+""}}])
;"use strict",thegioistickerApp.controller("shoppingCartController",["$scope","$timeout","customerService","ordersService","productService","localStorageService","Notification","couponService",function(a,b,c,d,e,f,g,h){function k(b){e.getListFileName(b).then(function(b){a.selectedProduct.imageUrls=b.data},function(a){g.error("Vui lòng kiểm tra lại."),hideLoader()})}a.shoppingCart=[],a.subTotal=0,a.couponValue=0,a.isApplyCoupon=!1,a.couponLabel="",a.note="",a.options=["Khi Nhận Hàng","Chuyển Khoản"],a.myselect="Khi Nhận Hàng",a.couponText="VND",a.orderNumber=location.search.split("orderId=")[1],a.coupon="",a.couponType=0,a.customer={id:0,userId:"",fullName:"",address:"",email:"",phoneNumber:""},a.selectedProduct={},c.getCustomerByUserId(a.authentication.id).then(function(b){b.data==null?(a.customer.fullName=a.authentication.fullName,a.customer.userId=a.authentication.id):a.customer={id:b.data.id,userId:a.authentication.id,fullName:b.data.fullName,address:b.data.address,email:b.data.email,phoneNumber:b.data.phoneNumber},hideLoader()},function(a){g.error("Vui lòng kiểm tra lại")});if(f.get("shoppingCart")!=null){var i=f.get("shoppingCart").products;a.shoppingCart=i}var j=function(){var b=0;for(var c=0,d=a.shoppingCart.length;c<d;c++)b+=a.shoppingCart[c].subTotal;a.couponResult!=undefined&&a.couponResult.type==2&&(a.couponText="% Đơn Hàng",b-=a.couponValue*b/100),a.couponResult!=undefined&&a.couponResult.type==1&&(a.couponText="VND",b-=a.couponValue),a.subTotal=b;var e=a.shoppingCart;f.set("shoppingCart",{products:e})};a.removeShopping=function(b){var c=a.shoppingCart.indexOf(b);a.shoppingCart.splice(c,1);var d=a.shoppingCart.find(function(a){return a.transactionId==b.transactionId});a.shoppingCart.splice(d,1);var e=a.shoppingCart;f.set("shoppingCart",{products:e}),g.primary("Đã xóa khỏi giỏ hàng thành công")},a.$watch("shoppingCart",j,!0),a.customer={},a.proccessOrder=function(){var b=$("#f1").data("formValidation"),c=$("#f1-step1");b.validateContainer(c);var e=b.isValidContainer(c);if(e===!1||e===null)return!1;if(a.shoppingCart.length==0){g.error("không có sản phẩm nào trong giỏ hàng");return}showLoader();var h={customer:a.customer,note:a.note,products:a.shoppingCart,couponName:a.coupon,discountValue:a.couponValue,payMentMethol:a.myselect,total:a.subTotal,couponType:a.couponType};d.saveOrder(h).then(function(b){console.log(20),a.orderNumber=b.data,g.success("Đơn hàng đã được tạo thành công"),setTimeout(function(){f.remove("shoppingCart"),window.location.href="/hoan-tat-don-hang?orderId="+btoa(b.data)+""},500)},function(a){g.error("Vui lòng kiểm tra lại đơn hàng."),hideLoader()})},b(function(){$("#f1").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f1").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{fullName:{validators:{notEmpty:{message:"Vui òng điền họ và tên"}}},address:{validators:{notEmpty:{message:"Vui lòng điền địa chỉ"}}},email:{validators:{notEmpty:{message:"Vui lòng điền email"}}},phoneNumber:{validators:{notEmpty:{message:"Vui lòng điền số điện thoại"}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()})}),a.applyCoupon=function(){h.applyCounpon(a.coupon).then(function(b){b.status==200&&b.data!=null&&(a.couponResult=b.data,a.couponValue=a.couponResult.amount,a.couponType=a.couponResult.type,a.isApplyCoupon=!0,a.couponLabel=a.couponResult.code,j(),g.success("Áp dụng mã khuyến mãi thành công"))},function(a){g.error("Mã khuyến mãi không đúng")})},a.showFilePopup=function(b){b.fileType==1&&(a.selectedProduct=b,a.fields=JSON.parse(a.selectedProduct.settingModal).fields,$("#shopping-review-popup").modal("show")),b.fileType==2&&(a.selectedProduct=b,$("#design-review-popup").modal("show")),b.fileType==3&&(k(b.transactionId),a.selectedProduct=b,$("#upload-review-popup").modal("show")),console.log(b)},a.removeCoupon=function(){a.couponValue=0,a.isApplyCoupon=!1,a.couponLabel="",a.coupon="",a.couponType=0,j()}}])
;"use strict",thegioistickerApp.controller("blogController",["$scope","$timeout","blogService","localStorageService","Notification",function(a,b,c,d,e){a.blogs=[],a.recentProducts=[],a.numPerPage=5,a.noOfPages=1,a.currentPage=1,a.setPage=function(){showLoader(),c.getblogs(a.currentPage,a.numPerPage).then(function(b){a.noOfPages=b.data.pager.totalPages,a.totalBlogs=b.data.pager.totalItems,a.blogs=b.data.items,$("html, body").animate({scrollTop:0},"slow"),hideLoader()},function(a){})},a.$watch("currentPage",a.setPage);if(d.get("recentProducts")!=null){var f=d.get("recentProducts").recentProducts;a.recentProducts=f}a.viewDetailBlog=function(a){window.location.href="/thong-tin-chi-tiet/"+a+""},a.viewDetail=function(a){window.location.href="/chi-tiet-san-pham/"+a+""}}])
;"use strict",thegioistickerApp.controller("blogDetailController",["$scope","$timeout","blogService","localStorageService","Notification","$rootScope",function(a,b,c,d,e,f){}])
;"use strict",thegioistickerApp.controller("faqController",["$scope","$timeout","faqService","localStorageService","Notification",function(a,b,c,d,e){function f(){showLoader(),c.getfaqs().then(function(b){a.faqs=b.data,hideLoader()},function(a){})}a.faqs=[],f()}])
;"use strict",thegioistickerApp.controller("companyController",["$scope","$timeout","companyService","localStorageService","Notification",function(a,b,c,d,e){function f(){showLoader(),c.getAllContentPages().then(function(a){$("#gioithieu").empty(),$("#gioithieu").append(a.data[0].content),$("#tuyendung").empty(),$("#tuyendung").append(a.data[1].content),$("#quydinhchung").empty(),$("#quydinhchung").append(a.data[2].content),$("#thanhtoangiaohang").empty(),$("#thanhtoangiaohang").append(a.data[3].content),$("#baomat").empty(),$("#baomat").append(a.data[4].content),hideLoader()},function(a){})}function g(){b(function(){$("#f11").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f11").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{name:{validators:{notEmpty:{message:"Vui lòng nhập tên"}}},email:{validators:{notEmpty:{message:"Vui lòng nhập email"}}},msg:{validators:{notEmpty:{message:"Vui lòng nhập nội dung"}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()})})}a.company=[],window.location.pathname!="/lien-he"&&f(),g(),a.sendContact=function(){var a=$("#f11").data("formValidation"),b=$("#f11-step1");a.validateContainer(b);var c=a.isValidContainer(b);if(c===!1||c===null)return!1;e.success("Đã gởi thành công.")}}])
;"use strict",thegioistickerApp.controller("userController",["$scope","customerService","$timeout","localStorageService","Notification","authService","productService",function(a,b,c,d,e,f,g){function i(b){g.getListFileName(b).then(function(b){a.selectedProduct.imageUrls=b.data},function(a){e.error("Vui lòng kiểm tra lại."),hideLoader()})}a.customer={id:0,userId:"",fullName:"",address:"",email:"",phoneNumber:""},a.orderDetail=[],a.detail={},a.selectedProduct={};var h={};a.order={},a.isChangeSuccess=!1,a.isChangePassWord=!1,a.DeleveryOptions=["Khi Nhận Hàng","Chuyển Khoản"],a.orderStatusOptions=[{value:0,name:"Chưa Giao Hàng"},{value:1,name:"Đang Giao Hàng"},{value:2,name:"Đã Giao Hàng"}],a.changePassWord={curentPassWord:"",newPassword:"",confirmNewPassword:""},a.resetPassWordModel={password:"",passwordConfirmation:"",email:"",token:""},a.availableOptions=[{id:0,name:"Chưa Giao Hàng"},{id:1,name:"Đang Giao Hàng"},{id:2,name:"Đã Giao Hàng"}],b.getCustomerByUserId(a.authentication.id).then(function(b){b.data==null?(a.customer.fullName=a.authentication.fullName,a.customer.userId=a.authentication.id,a.customer.email=a.authentication.email,a.customer.address=a.authentication.address,a.customer.phoneNumber=a.authentication.phoneNumber):a.customer={id:b.data.id,userId:a.authentication.id,fullName:b.data.fullName,address:b.data.address,email:b.data.email,phoneNumber:b.data.phoneNumber},a.initTable()},function(a){e.error("Vui lòng kiểm tra lại")}),a.changePassword=function(){if(a.changePassWord.curentPassWord==""){e.error("Vui lòng nhập mật khẩu hiện tại");return}if(a.changePassWord.newPassword==""){e.error("Vui lòng nhập mật khẩu mới");return}if(a.changePassWord.newPassword!=a.changePassWord.confirmNewPassword){e.error("Password và confirm password không giống nhau");return}a.changePassWord.userId=a.authentication.id,f.saveChangePassword(a.changePassWord).then(function(b){a.savedSuccessfully=!0,c(function(){e.success("Đổi mật khẩu thành công"),a.loginData={userName:a.registration.userName,password:a.registration.password,useRefreshTokens:!1},f.logOut(),f.login()},1e3)},function(a){var b=[];for(var c in a.data.modelState)for(var d=0;d<a.data.modelState[c].length;d++)b.push(a.data.modelState[c][d]);e.error("Đã có lỗi xảy ra:"+b.join(" "))})},a.createNewPassword=function(){var b=new URL(location);a.resetPassWordModel.email=b.searchParams.get("email"),a.resetPassWordModel.token=b.searchParams.get("token");if(a.resetPassWordModel.password==""){e.error("Vui lòng nhập mật khẩu mới");return}if(a.resetPassWordModel.password!=a.resetPassWordModel.passwordConfirmation){e.error("Password và confirm password không giống nhau");return}f.resetPassword(a.resetPassWordModel).then(function(b){a.savedSuccessfully=!0,c(function(){a.isChangeSuccess=!0,e.success("Đổi mật khẩu thành công"),a.loginData={userName:a.registration.userName,password:a.registration.password,useRefreshTokens:!1},f.logOut(),f.login()},1e3)},function(a){var b=[];for(var c in a.data.modelState)for(var d=0;d<a.data.modelState[c].length;d++)b.push(a.data.modelState[c][d]);e.error("Đã có lỗi xảy ra:"+b.join(" "))})},a.updateCustomer=function(){var c=$("#f1").data("formValidation"),d=$("#f1-step1");c.validateContainer(d);var f=c.isValidContainer(d);if(f===!1||f===null)return!1;if(a.customer.fullName==""){e.error("Vui lòng nhập họ và tên");return}if(a.customer.address==""){e.error("Vui lòng nhập địa chỉ");return}if(a.customer.email==""){e.error("Vui lòng nhập mật email");return}if(a.customer.phoneNumber==""){e.error("Vui lòng nhập số điện thoại");return}b.savecustomer(a.customer).then(function(a){e.success("Cập nhật thông tin thành công")},function(a){e.error("Vui lòng kiểm tra lại")})},c(function(){$("#f1").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f1").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{fullName:{validators:{notEmpty:{message:"Vui òng điền họ và tên"}}},address:{validators:{notEmpty:{message:"Vui lòng điền địa chỉ"}}},email:{validators:{notEmpty:{message:"Vui lòng điền email"}}},phoneNumber:{validators:{notEmpty:{message:"Vui lòng điền số điện thoại"}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()})}),a.initTable=function(){h=$("#order-table").DataTable({language:{lengthMenu:"Hiển thị _MENU_ số dòng trên trang",zeroRecords:"Không tìm thấy dữ liệu",info:"Hiển thị trang _PAGE_ của _PAGES_",infoEmpty:"No records available",infoFiltered:"(Đã lọc từ _MAX_ trong tổng số dòng)"},dom:"rtip",processing:!0,serverSide:!0,searching:!0,ordering:!0,paging:!0,ajax:{url:"api/customer/getPagingOrders",type:"GET",data:{customerId:a.customer.id}},initComplete:function(){var a=this.api(),b=$("#orders-search-input");b.length>0&&b.on("keyup",function(b){a.search(b.target.value).draw()})},columns:[{data:"id",filterable:!1,sortable:!1},{data:"customerName",render:function(a,b){return b==="display"?'<a class="edit-customer" style="color:green" href="javascript:void(0)">'+a+"</a>":a}},{data:"couponName"},{data:"couponType",render:function(a,b){return b==="display"?a==1?"Số Tiền":a==2?"Phần Trăm":"":a}},{data:"discountValue",render:$.fn.dataTable.render.number(",")},{data:"total",render:$.fn.dataTable.render.number(",")},{data:"payMentMethol"},{data:"orderStatus",render:function(a,b){return b==="display"?a==0?"Chưa Giao Hàng":a==1?"Đang Giao Hàng":"Đã Giao Hàng":a}},{data:"note"},{data:"dateCreated",render:function(a,b,c){return a==null?"":b==="sort"||b==="type"?a:moment(a).format("DD-MM-YYYY HH:mm")}},{data:"deliveryDate",render:function(a,b,c){return a==null?"":b==="sort"||b==="type"?a:moment(a).format("DD-MM-YYYY HH:mm")}},{data:null,sortable:!1,targets:-1,defaultContent:' <button type="button" class="btn btn-icon edit-user" aria-label="Product details"><i class="fa fa-eye"></i></button>'}],lengthMenu:[[10,25,50,100],[10,25,50,100]],pageLength:10,scrollY:"auto",scrollX:!1,responsive:!0,autoWidth:!1}),hideLoader()},$("body").delegate(".edit-user","click",function(b){b.preventDefault();var d=h.row($(this).parents("tr")).data();a.order=d,a.orderDetail=d.orderDetail,a.order.deliveryDate!=null&&(a.order.deliveryDate=new Date(a.order.deliveryDate)),c(function(){c(function(){$("#repeatSelect").val(a.order.orderStatus)},200),$("#repeatSelect").val(a.order.orderStatus),$("#modal-lg").modal("show")},200)}),a.showFilePopup=function(b){b.fileType==1&&(a.selectedProduct=b,a.fields=JSON.parse(a.selectedProduct.settingModal).fields,$("#shopping-review-popup").modal("show")),b.fileType==2&&(a.selectedProduct=b,$("#design-review-popup").modal("show")),b.fileType==3&&(i(b.transactionId),a.selectedProduct=b,$("#upload-review-popup").modal("show")),console.log(b)}}])
;"use strict",thegioistickerApp.controller("productDetailController",["$scope","$timeout","productService","localStorageService","Notification","invoiceService","sampleService","$compile",function(a,b,c,d,e,f,g,h){function k(){b(function(){$("#f1").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f1").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()}),$("#f2").on("init.field.fv",function(a,b){var c=b.element.parents(".form-group"),d=b.element.data("fv.icon"),e=c.children("label");d.insertAfter(e)}),$("#f2").formValidation({icon:{valid:"fa fa-check",invalid:"fa fa-times",validating:"fa fa-refresh"},excluded:":disabled",live:"disabled",fields:{width:{validators:{notEmpty:{message:"Vui lòng nhập chiều ngang"}}},height:{validators:{notEmpty:{message:"Vui lòng nhập chiều cao"}}},quantity:{validators:{notEmpty:{message:"Vui lòng nhập số lượng"},callback:{message:"Số lượng tối thiểu là 100.",callback:function(a,b,c){return parseFloat(a)>=100?!0:!1}}}}}}).on("err.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("err.validator.fv",function(a,b){b.element.data("fv.messages").find('.help-block[data-fv-for="'+b.field+'"]').hide().filter('[data-fv-validator="'+b.validator+'"]').show()}).on("success.field.fv",function(a,b){b.fv.disableSubmitButtons(!1)}).on("success.form.fv",function(a){a.preventDefault()})})}function l(b){$(".detail-slider .slider-for").slick("destroy"),$(".detail-slider .slider-nav").slick("destroy");var c=angular.element(document.querySelector(".detail-slider"));c.empty();var d='<div class="slider slider-for">';angular.forEach(b,function(a,b){d=d+'<div class="img-outline ng-scope"><img style="cursor:pointer;" class="img-responsive" src="'+a.image+'"></div>'}),d+="</div>";var e='<div class="slider slider-nav img-slider">';angular.forEach(b,function(a,b){e=e+'<div class="img-small ng-scope"><img  class="img-responsive bd-color-setting" src="'+a.image+'"></div>'}),e+="</div>";var f=d+e,g=angular.element(f);c.append(g),h(c)(a),$(".detail-slider .slider-for").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,autoplay:!0,fade:!0,asNavFor:".detail-slider .slider-nav"}),$(".detail-slider .slider-nav").slick({slidesToShow:3,slidesToScroll:1,autoplay:!0,asNavFor:".detail-slider .slider-for",dots:!1,centerMode:!0,focusOnSelect:!0})}function m(){c.getSampleByProductBySeoUrl(i).then(function(b){a.products=b.data,l(a.products),hideLoader()},function(a){})}var i=new URL(location.href),j=new URLSearchParams(i.search),i=location.pathname.split("chi-tiet-san-pham/")[1];a.samples=[],a.products=[],a.productsId=[],c.getProductBySeoUrl(i).then(function(b){a.product=b.data,a.shoppingCart.material=a.product,$("#view-content").empty(),$("#view-content").append(a.product.description),a.productsId=b.data.productSample,m(),hideLoader()},function(a){}),k(),$("body").delegate(".categories li","click",function(a){a.preventDefault(),$(".categories li.active").removeClass("active"),$(this).addClass("active")}),a.viewDetail=function(a){window.location.href="/chi-tiet-san-pham/"+a+""}}])
;"use strict",thegioistickerApp.controller("galleryController",["$scope","$timeout","productService","localStorageService","Notification","sampleService","$compile","invoiceService",function(a,b,c,d,e,f,g,h){a.products=[],a.numPerPage=12,a.noOfPages=1,a.currentPage=1,a.currentCategory=1,a.categoryId=0,a.samples=[],a.step=1,a.product={},a.shapes=[{id:1,name:"Hình Tròn",code:"hinhtron",image:"/images/shapes/hinhtron.png"},{id:2,name:"Hình Oval",code:"hinhoval",image:"/images/shapes/hinhoval.png"},{id:3,name:"Hình Vuông",code:"hinhvuong",image:"/images/shapes/hinhvuong.png"},{id:4,name:"Hình Vuông Bo Góc",code:"hinhvuongbogoc",image:"/images/shapes/hinhvuongbogoc.png"},{id:5,name:"Hình Chữ Nhật",code:"hinhchunhat",image:"/images/shapes/hinhchunhat.png"},{id:6,name:"Hình Chữ Nhật Bo Góc",code:"hinhchunhatbogoc",image:"/images/shapes/hinhchunhatbogoc.png"},{id:7,name:"Hình Hoa",code:"hinhhoa",image:"/images/shapes/hinhhoa.png"},{id:8,name:"Hình Nơ",code:"hinhno",image:"/images/shapes/hinhno.png"},{id:9,name:"Hình Lục Giác",code:"hinhlucgiac",image:"/images/shapes/hinhlucgiac.png"},{id:10,name:"Hình Trái Tim",code:"hinhtraitim",image:"/images/shapes/hinhtraitim.png"},{id:11,name:"Hình Mẫu 1",code:"hinhmau1",image:"/images/shapes/hinhmau1.png"},{id:12,name:"Hình Mẫu 2",code:"hinhmau2",image:"/images/shapes/hinhmau2.png"},{id:13,name:"Hình Mẫu 3",code:"hinhmau3",image:"/images/shapes/hinhmau3.png"},{id:14,name:"Hình Mẫu 4",code:"hinhmau4",image:"/images/shapes/hinhmau4.png"}],$("body").delegate(".categories li","click",function(a){a.preventDefault(),$(".categories li.active").removeClass("active"),$(this).addClass("active")}),a.setPage=function(){showLoader(),f.getSamples(a.currentPage,a.numPerPage,a.currentCategory).then(function(b){a.noOfPages=b.data.pager.totalPages,a.totalProduct=b.data.pager.totalItems,a.products=b.data.items,$("html, body").animate({scrollTop:0},"slow"),hideLoader()},function(a){})},a.$watch("currentPage",a.setPage),a.searchByCategory=function(b){a.currentCategory=b,a.numPerPage=12,a.noOfPages=1,a.currentPage=1,a.setPage()},a.recentProducts=[];if(d.get("recentProducts")!==null){var i=d.get("recentProducts").recentProducts;a.recentProducts=i}a.viewDetail=function(a){window.location.href="/chi-tiet-san-pham/"+a}}])
